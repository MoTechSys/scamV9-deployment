# Generated by Django 6.0.2 on 2026-02-08 11:05

import django.core.validators
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('ai_features', '0003_aigeneratedquestion_score_aisummary_md_file_path_and_more'),
        ('courses', '0002_lecturefile_idx_lf_course_vis_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AIConfiguration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('active_model', models.CharField(choices=[('gemini-2.0-flash', 'Gemini 2.0 Flash (Ø³Ø±ÙŠØ¹)'), ('gemini-1.5-flash', 'Gemini 1.5 Flash (Ù…ØªÙˆØ§Ø²Ù†)'), ('gemini-1.5-pro', 'Gemini 1.5 Pro (Ø¯Ù‚ÙŠÙ‚)'), ('gemini-2.0-pro', 'Gemini 2.0 Pro (Ù…ØªÙ‚Ø¯Ù…)')], default='gemini-2.0-flash', help_text='Ù†Ù…ÙˆØ°Ø¬ Gemini Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø¬Ù…ÙŠØ¹ Ø¹Ù…Ù„ÙŠØ§Øª AI', max_length=50, verbose_name='Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù†Ø´Ø·')),
                ('chunk_size', models.PositiveIntegerField(default=30000, help_text='Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ø­Ø¬Ù… ÙƒÙ„ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ù†Øµ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù€ AI (1000-100000)', validators=[django.core.validators.MinValueValidator(1000), django.core.validators.MaxValueValidator(100000)], verbose_name='Ø­Ø¬Ù… Ø§Ù„ØªÙ‚Ø·ÙŠØ¹ (Ø­Ø±Ù)')),
                ('chunk_overlap', models.PositiveIntegerField(default=500, help_text='Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ù…ØªØ¯Ø§Ø®Ù„Ø© Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ§Ù‚', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(5000)], verbose_name='ØªØ¯Ø§Ø®Ù„ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ (Ø­Ø±Ù)')),
                ('max_output_tokens', models.PositiveIntegerField(default=2000, help_text='Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ø¹Ø¯Ø¯ Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª ÙÙŠ Ø§Ø³ØªØ¬Ø§Ø¨Ø© AI (100-8192)', validators=[django.core.validators.MinValueValidator(100), django.core.validators.MaxValueValidator(8192)], verbose_name='Ø­Ø¯ Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª Ù„Ù„Ø¥Ø®Ø±Ø§Ø¬')),
                ('temperature', models.FloatField(default=0.3, help_text='0.0 = Ù…Ø­Ø§ÙØ¸ ÙˆØ¯Ù‚ÙŠÙ‚ | 1.0 = Ù…ØªÙˆØ§Ø²Ù† | 2.0 = Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ', validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(2.0)], verbose_name='Ø¯Ø±Ø¬Ø© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ (Temperature)')),
                ('user_rate_limit_per_hour', models.PositiveIntegerField(default=10, help_text='Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ø·Ù„Ø¨Ø§Øª AI Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ø³Ø§Ø¹Ø©', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(1000)], verbose_name='Ø­Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª/Ø³Ø§Ø¹Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…')),
                ('is_service_enabled', models.BooleanField(default=True, help_text='Ø¥ÙŠÙ‚Ø§Ù Ù‡Ø°Ø§ Ø§Ù„Ø®ÙŠØ§Ø± ÙŠØ¹Ø·Ù‘Ù„ Ø¬Ù…ÙŠØ¹ Ø®Ø¯Ù…Ø§Øª AI ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…', verbose_name='Ø®Ø¯Ù…Ø© AI Ù…ÙØ¹Ù„Ø©')),
                ('maintenance_message', models.CharField(blank=True, default='Ø®Ø¯Ù…Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…ØªÙˆÙ‚ÙØ© Ù…Ø¤Ù‚ØªØ§Ù‹ Ù„Ù„ØµÙŠØ§Ù†Ø©.', help_text='Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙŠ ØªØ¸Ù‡Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¹Ù†Ø¯ ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©', max_length=500, verbose_name='Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ai_config_updates', to=settings.AUTH_USER_MODEL, verbose_name='Ø¢Ø®Ø± ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙˆØ§Ø³Ø·Ø©')),
            ],
            options={
                'verbose_name': 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ',
                'verbose_name_plural': 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ',
                'db_table': 'ai_configuration',
            },
        ),
        migrations.CreateModel(
            name='APIKey',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('label', models.CharField(default='Ù…ÙØªØ§Ø­ API', help_text='Ø§Ø³Ù… ÙˆØµÙÙŠ Ù„Ù„ØªÙ…ÙŠÙŠØ² (Ù…Ø«Ø§Ù„: Ù…ÙØªØ§Ø­ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ)', max_length=100, verbose_name='Ø§Ø³Ù… Ø§Ù„Ù…ÙØªØ§Ø­')),
                ('provider', models.CharField(choices=[('gemini', 'Google Gemini'), ('openai', 'OpenAI (Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ)')], default='gemini', max_length=20, verbose_name='Ø§Ù„Ù…Ø²ÙˆØ¯')),
                ('_encrypted_key', models.TextField(db_column='encrypted_key', help_text='ÙŠØªÙ… Ø§Ù„ØªØ´ÙÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø­ÙØ¸', verbose_name='Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ù…Ø´ÙØ±')),
                ('key_hint', models.CharField(blank=True, help_text='Ø¢Ø®Ø± 4 Ø£Ø­Ø±Ù Ù…Ù† Ø§Ù„Ù…ÙØªØ§Ø­ (Ù„Ù„ØªØ¹Ø±Ù)', max_length=20, verbose_name='ØªÙ„Ù…ÙŠØ­ Ø§Ù„Ù…ÙØªØ§Ø­')),
                ('status', models.CharField(choices=[('active', 'ğŸŸ¢ Ù†Ø´Ø·'), ('cooldown', 'ğŸŸ¡ ÙÙŠ ÙØªØ±Ø© Ø±Ø§Ø­Ø©'), ('disabled', 'ğŸ”´ Ù…Ø¹Ø·Ù„'), ('error', 'âš ï¸ Ø®Ø·Ø£')], default='active', max_length=20, verbose_name='Ø§Ù„Ø­Ø§Ù„Ø©')),
                ('is_active', models.BooleanField(default=True, help_text='ÙŠÙ…ÙƒÙ† ØªØ¹Ø·ÙŠÙ„Ù‡ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ø£Ø¯Ù…Ù†', verbose_name='Ù…ÙØ¹Ù‘Ù„')),
                ('error_count', models.PositiveIntegerField(default=0, verbose_name='Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡')),
                ('total_requests', models.PositiveIntegerField(default=0, verbose_name='Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª')),
                ('last_error', models.TextField(blank=True, null=True, verbose_name='Ø¢Ø®Ø± Ø®Ø·Ø£')),
                ('last_error_at', models.DateTimeField(blank=True, null=True, verbose_name='ÙˆÙ‚Øª Ø¢Ø®Ø± Ø®Ø·Ø£')),
                ('last_success_at', models.DateTimeField(blank=True, null=True, verbose_name='ÙˆÙ‚Øª Ø¢Ø®Ø± Ù†Ø¬Ø§Ø­')),
                ('last_latency_ms', models.PositiveIntegerField(default=0, verbose_name='Ø²Ù…Ù† Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© (Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©)')),
                ('rpm_limit', models.PositiveIntegerField(default=15, help_text='Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø·Ù„Ø¨Ø§Øª ÙÙŠ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© Ø­Ø³Ø¨ Ø®Ø·Ø© Google Cloud', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(1000)], verbose_name='Ø­Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª/Ø¯Ù‚ÙŠÙ‚Ø© (RPM)')),
                ('cooldown_until', models.DateTimeField(blank=True, help_text='Ø§Ù„Ù…ÙØªØ§Ø­ Ù„Ù† ÙŠÙØ³ØªØ®Ø¯Ù… Ø­ØªÙ‰ Ù‡Ø°Ø§ Ø§Ù„ÙˆÙ‚Øª', null=True, verbose_name='ÙØªØ±Ø© Ø§Ù„Ø±Ø§Ø­Ø© Ø­ØªÙ‰')),
                ('tokens_used_today', models.PositiveIntegerField(default=0, verbose_name='Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ø§Ù„ÙŠÙˆÙ…')),
                ('tokens_reset_date', models.DateField(blank=True, null=True, verbose_name='ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†')),
                ('priority', models.PositiveIntegerField(default=0, help_text='Ø£Ù‚Ù„ Ø±Ù‚Ù… = Ø£ÙˆÙ„ÙˆÙŠØ© Ø£Ø¹Ù„Ù‰. ÙŠÙØ³ØªØ®Ø¯Ù… Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØªØ¯ÙˆÙŠØ±', verbose_name='Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«')),
            ],
            options={
                'verbose_name': 'Ù…ÙØªØ§Ø­ API',
                'verbose_name_plural': 'Ù…ÙØ§ØªÙŠØ­ API',
                'db_table': 'ai_api_keys',
                'ordering': ['priority', '-is_active', 'created_at'],
                'indexes': [models.Index(fields=['provider', 'is_active', 'status'], name='ai_api_keys_provide_0cb026_idx'), models.Index(fields=['cooldown_until'], name='ai_api_keys_cooldow_1336df_idx')],
            },
        ),
        migrations.AddField(
            model_name='aiusagelog',
            name='api_key_used',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='usage_logs', to='ai_features.apikey', verbose_name='Ù…ÙØªØ§Ø­ API Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'),
        ),
        migrations.AddIndex(
            model_name='aiusagelog',
            index=models.Index(fields=['request_time'], name='ai_usage_lo_request_949837_idx'),
        ),
    ]
